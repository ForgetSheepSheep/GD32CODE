/******************************************************************************
 * @file    drv_temp.h
 * @brief   NTC 温度传感器驱动模块（ADC 采样 + 查表法）
 *
 * @note
 *  - 使用 ADC 采集 NTC 分压电压
 *  - 通过 ADC 值在查表中匹配得到对应温度
 *  - 温度数据经过滤波处理
 *
 * 硬件说明：
 *  - NTC 接 ADC 通道 PC3 / ADC_CHANNEL_13
 *  - ADC 参考电压为 MCU Vref
 *
 * 软件说明：
 *  - ADC 使用连续转换模式
 *  - 数据经过中位值平均滤波处理
 *  - 温度最终以 °C 输出
 ******************************************************************************/

#ifndef __DRV_TEMP_H
#define __DRV_TEMP_H
#include "config.h"

/**
***********************************************************
* @brief  NTC 温度传感器驱动初始化
* @param
* @return
* @note
*  该函数完成以下初始化：
*   1) GPIO 初始化（PC3 配置为模拟输入）
*   2) ADC 初始化（ADC0 通道13，连续转换模式）
*   3) 启动过采样功能（16次过采样，提高精度）
*
*  调用示例：
*   drv_temp_init();  // 初始化后自动开始采集
***********************************************************
*/
void drv_temp_init(void);

/**
***********************************************************
* @brief  温度传感器数据处理
* @param
* @return
* @note
*  该函数在主循环中调用，用于更新温度数据：
*   1) 获取 ADC 值并转换为温度
*   2) 推入缓存缓冲区
*   3) 使用中位值平均滤波处理
*
*  调用示例：
*   drv_tempsensor_proc();  // 定期调用更新温度
***********************************************************
*/
void drv_tempsensor_proc(void);

/**
***********************************************************
* @brief  获取当前温度值
* @param
* @return  温度值（单位：°C）
* @note
*  返回值范围：0.0 ~ 99.0
*  使用前需要先调用 drv_tempsensor_proc() 更新数据
*
*  调用示例：
*   float temp = drv_get_temp();
***********************************************************
*/
float drv_get_temp(void);

#endif /* __DRV_TEMP_H */
